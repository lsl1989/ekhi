(self.webpackChunkeasy_know_hard_insist=self.webpackChunkeasy_know_hard_insist||[]).push([[654],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return d}});var l=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=l.createContext({}),u=function(e){var t=l.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return l.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),k=u(n),d=r,m=k["".concat(s,".").concat(d)]||k[d]||c[d]||i;return n?l.createElement(m,a(a({ref:t},p),{},{components:n})):l.createElement(m,a({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=k;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,a[1]=o;for(var u=2;u<i;u++)a[u]=n[u];return l.createElement.apply(null,a)}return l.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9428:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return a},metadata:function(){return o},toc:function(){return s},default:function(){return p}});var l=n(2122),r=n(9756),i=(n(7294),n(3905)),a={id:"redis-list",title:"Redis For List"},o={unversionedId:"program/redis/redis-list",id:"program/redis/redis-list",isDocsHomePage:!1,title:"Redis For List",description:"Redis - list",source:"@site/docs/program/redis/list.md",sourceDirName:"program/redis",slug:"/program/redis/redis-list",permalink:"/ekhi/docs/program/redis/redis-list",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/program/redis/list.md",version:"current",lastUpdatedAt:1622316149,formattedLastUpdatedAt:"5/30/2021",frontMatter:{id:"redis-list",title:"Redis For List"},sidebar:"programSidebar",previous:{title:"Redis",permalink:"/ekhi/docs/program/redis/redis-index"},next:{title:"Redis for dictionary data.",permalink:"/ekhi/docs/program/redis/redis-map"}},s=[{value:"Redis - list",id:"redis---list",children:[]},{value:"Command",id:"command",children:[{value:"Insert value into list",id:"insert-value-into-list",children:[]},{value:"Get Value",id:"get-value",children:[]},{value:"Delete value",id:"delete-value",children:[]},{value:"\u4fee\u6539\u5217\u8868\u4e2d\u7684\u503c",id:"\u4fee\u6539\u5217\u8868\u4e2d\u7684\u503c",children:[]},{value:"\u963b\u585e\u64cd\u4f5c",id:"\u963b\u585e\u64cd\u4f5c",children:[]}]},{value:"List \u7f16\u7801",id:"list-\u7f16\u7801",children:[{value:"ziplist",id:"ziplist",children:[]},{value:"linkedlist",id:"linkedlist",children:[]},{value:"quicklist",id:"quicklist",children:[]}]},{value:"\u5b9e\u9645\u5e94\u7528",id:"\u5b9e\u9645\u5e94\u7528",children:[]}],u={toc:s};function p(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,l.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"redis---list"},"Redis - list"),(0,i.kt)("h2",{id:"command"},"Command"),(0,i.kt)("h3",{id:"insert-value-into-list"},"Insert value into list"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"rpush key value ","[value ...]",(0,i.kt)("br",{parentName:"p"}),"\n","lpush key value ","[value ...]")),(0,i.kt)("p",null,"\u4ece\u5de6(",(0,i.kt)("strong",{parentName:"p"},"lpush")," -> l means left)\u6216\u4ece\u53f3(",(0,i.kt)("strong",{parentName:"p"},"rpush")," -> r means right)\u5f80\u5217\u8868\u63d2\u5165\u6570\u636e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-reids"},'127.0.0.1:6379> lpush li x1 x2 x3\n(integer) 6\n127.0.0.1:6379> rpush li y1 y2 y3\n(integer) 9\n127.0.0.1:6379> lrange li 0 -1\n1) "x3"\n2) "x2"\n3) "x1"\n4) "a"\n5) "c"\n6) "b"\n7) "y1"\n8) "y2"\n9) "y3"\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"linsert key before|after pivot value")),(0,i.kt)("p",null,"\u627e\u5230list\u4e2d\u503c\u7b49\u4e8e",(0,i.kt)("strong",{parentName:"p"},"pivot"),"\u7684\u5143\u7d20\uff0c\u5e76\u6839\u636e",(0,i.kt)("strong",{parentName:"p"},"before|after"),"\u53c2\u6570\u6765\u5728\u8be5\u5143\u7d20\u7684\u524d|\u540e\u63d2\u5165\u65b0\u503c",(0,i.kt)("strong",{parentName:"p"},"value")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-redis"},'127.0.0.1:6379> lrange li 0 -1\n1) "a"\n2) "c"\n3) "b"\n127.0.0.1:6379> linsert li before c x\n(integer) 4\n127.0.0.1:6379> linsert li after c y\n(integer) 5\n127.0.0.1:6379> lrange li 0 -1\n1) "a"\n2) "x"\n3) "c"\n4) "y"\n5) "b"\n')),(0,i.kt)("h3",{id:"get-value"},"Get Value"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lrange key start stop")),(0,i.kt)("p",null,"start\u548cstop\u53ef\u4ee5\u4e3a",(0,i.kt)("strong",{parentName:"p"},"\u8d1f\u6570"),"\uff0c\u8d1f\u6570\u4ee3\u8868\u4ece\u53f3\u5f80\u5de6\u7684\u987a\u5e8f\uff0c-1\u662f\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002\nlrange\u547d\u4ee4\u8fd4\u56de\u503c\u5305\u542b\u4e86",(0,i.kt)("strong",{parentName:"p"},"stop\u81ea\u8eab"),"\uff0c\u548c\u5f88\u591a\u5e94\u7528\u7a0b\u5e8f\u7684\u5904\u7406\u4e0d\u592a\u4e00\u6837"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-redis"},'127.0.0.1:6379> lrange li 0 -1\n1) "a"\n2) "c"\n3) "b"\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u5de6\u53f3\u5373\u524d\u540e\uff0clist\u662f\u4e00\u4e2a\u6709\u5e8f\u5217\u8868\uff0c\u4ece\u5de6\u5f80\u53f3\u5373\u4ece\u524d\u5f80\u540e\uff0c\u53cd\u4e4b\u4ea6\u7136")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u6307\u5b9a\u4e0b\u6807\u7684\u5143\u7d20")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lindex key index")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-reids"},'127.0.0.1:6379> LRANGE li 0 -1\n1) "a"\n2) "x"\n3) "c"\n4) "y"\n5) "b"\n127.0.0.1:6379> LINDEX li 2\n"c"\n')),(0,i.kt)("p",null,"index \u4ece0\u5f00\u59cb"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u957f\u5ea6")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"llen key")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-redis"},"127.0.0.1:6379> llen li\n(integer) 5\n")),(0,i.kt)("h3",{id:"delete-value"},"Delete value"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lpop key\nrpop key")),(0,i.kt)("p",null,"\u4ece\u5de6\u4ece\u53f3\u5f39\u51fa",(0,i.kt)("strong",{parentName:"p"},"\u4e00\u4e2a"),"\u5143\u7d20"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lrem key count value")),(0,i.kt)("p",null,"lrem \u547d\u4ee4\u4f1a\u4ece \u5217\u8868 \u4e2d\u627e\u5230 \u7b49\u4e8e value \u7684\u5143\u7d20\u8fdb\u884c \u5220\u9664\uff0c\u6839\u636e count \u7684\u4e0d\u540c\u5206\u4e3a\u4e09\u79cd\u60c5\u51b5:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"count > 0\uff1a\u4ece\u5de6\u5230\u53f3\uff0c\u5220\u9664\u6700\u591a count \u4e2a\u5143\u7d20\u3002"),(0,i.kt)("li",{parentName:"ul"},"count < 0\uff1a\u4ece\u53f3\u5230\u5de6\uff0c\u5220\u9664\u6700\u591a count \u7edd\u5bf9\u503c \u4e2a\u5143\u7d20\u3002"),(0,i.kt)("li",{parentName:"ul"},"count = 0\uff0c\u5220\u9664\u6240\u6709\u3002")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"ltrim key start stop")),(0,i.kt)("p",null,"\u6839\u636estart\u548cstop\u7684\u503c\u526a\u5207\u5217\u8868"),(0,i.kt)("h3",{id:"\u4fee\u6539\u5217\u8868\u4e2d\u7684\u503c"},"\u4fee\u6539\u5217\u8868\u4e2d\u7684\u503c"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"lset key index new_value")),(0,i.kt)("p",null,"\u5c06\u4e0b\u6807\u4e3aindex\u7684\u5143\u7d20\u4fee\u6539\u4e3a\u65b0\u503cnew_value"),(0,i.kt)("h3",{id:"\u963b\u585e\u64cd\u4f5c"},"\u963b\u585e\u64cd\u4f5c"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"blpop key ","[key ...]"," timeout\nbrpop key ","[key ...]"," timeout")),(0,i.kt)("p",null,"\u963b\u585e\u5f0f\u7684\u5f39\u51falist\u4e2d\u7684\u503c\uff0c\u4e0elpop\u548crpop\u7c7b\u4f3c\uff0c\u4ece\u5de6\u6216\u4ece\u53f3\u5f39\u51fa\u3002\n\u5f53list\u4e0d\u4e3a\u7a7a\u65f6\uff0c\u7acb\u5373\u5f39\u51falist\u4e2d\u7684\u503c\u3002\n\u5f53list\u4e3a\u7a7a\u65f6\uff0c\u82e5timeout>0\u5219\u4f1a\u963b\u585e\u5e76\u7b49\u5f85timeout\u7684\u79d2\u6570\u540e\u8fd4\u56de\u7a7a\u503c\uff0c\u82e5\u5728\u7b49\u5f85\u7684\u65f6\u95f4\u5185list\u63d2\u5165\u4e86\u65b0\u503c\uff0c\u5219\u4f1a\u7acb\u5373\u5f39\u51fa\u65b0\u503c\u3002\u800c\u82e5timeout=0,\u5219\u4f1a\u4e00\u76f4\u7b49\u5f85\u76f4\u5230\u63d2\u5165\u65b0\u503c\u3002"),(0,i.kt)("p",null,"\u963b\u585e\u5f0f\u5f39\u51fa\u503c\u5f53\u63a5\u53d7\u591a\u4e2akey\u7684\u65f6\u5019\uff0c\u4f1a\u4ece\u5de6\u81f3\u53f3\u904d\u5386key\uff0c\u82e5\u5176\u4e2d\u4efb\u610f\u4e00\u4e2a\u6709\u503c\u5219\u4f1a\u7acb\u5373\u5f39\u51fa\u8be5\u503c"),(0,i.kt)("p",null,"\u591a\u4e2a\u5ba2\u6237\u7aef\u5bf9\u540c\u4e00\u4e2akey\u6267\u884cblpop\uff0c\u6700\u5148\u6267\u884cblpop\u7684\u53ef\u4ee5\u83b7\u53d6\u5230\u5f39\u51fa\u7684\u503c"),(0,i.kt)("h2",{id:"list-\u7f16\u7801"},"List \u7f16\u7801"),(0,i.kt)("p",null,"redis3.2\u4e4b\u524d\u4f7f\u7528ziplist\u548clinkedlist. 3.2\u7248\u672c\u540e\u4f7f\u7528",(0,i.kt)("a",{parentName:"p",href:"https://matt.sh/redis-quicklist"},"quicklist")),(0,i.kt)("h3",{id:"ziplist"},"ziplist"),(0,i.kt)("p",null,"\u5217\u8868\u5143\u7d20\u5c0f\u4e8e",(0,i.kt)("strong",{parentName:"p"},"list-max-ziplist-entries"),"(\u9ed8\u8ba4512)\uff0c\u5e76\u4e14\u5217\u8868\u4e2d\u7684\u5143\u7d20\u503c\u90fd\u5c0f\u4e8e",(0,i.kt)("strong",{parentName:"p"},"list-max-ziplist-value"),"\uff08\u9ed8\u8ba464\u5b57\u8282\uff09\uff0credis\u4f1a\u4f7f\u7528ziplist\u6765\u51cf\u5c11\u5185\u5b58\u4f7f\u7528"),(0,i.kt)("h3",{id:"linkedlist"},"linkedlist"),(0,i.kt)("p",null,"\u5f53ziplist\u7684\u6761\u4ef6\u65e0\u6cd5\u6ee1\u8db3\u65f6\uff0credis\u4f1a\u4f7f\u7528\u94fe\u8868linkedlist\u6765\u5b9e\u73b0list"),(0,i.kt)("h3",{id:"quicklist"},"quicklist"),(0,i.kt)("p",null,"\u7531\u4e8elinkedlist\u7684\u5185\u5b58\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927(\u6bcf\u4e2a\u8282\u70b9\u4e0a\u9700\u8981\u989d\u5916\u4e24\u4e2a\u6307\u9488\uff0c\u53cc\u5411\u94fe\u8868\u5404\u4e2a\u8282\u70b9\u662f\u5355\u72ec\u7684\u5185\u5b58\u5757\uff0c\u5730\u5740\u4e0d\u8fde\u7eed\uff0c\u8282\u70b9\u591a\u4e86\u5bb9\u6613\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002)\uff0c\u800cziplist\u7531\u4e8e\u662f\u8fde\u7eed\u7684\u5185\u5b58\uff0c\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u9700\u8981\u9891\u7e41\u7684\u7533\u8bf7\u548c\u91ca\u653e\u5185\u5b58\uff0c\u6240\u4ee5\u5f53ziplist\u957f\u5ea6\u5f88\u957f\u7684\u65f6\u5019\uff0c\u4e00\u6b21realloc(C\u8bed\u8a00\u91cd\u65b0\u5206\u914d\u5185\u5b58)\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u6570\u636e\u62f7\u8d1d\u3002"),(0,i.kt)("p",null,"quicklist\u7684\u7ed3\u6784\u662f\u5728\u4e00\u4e2a\u94fe\u8868linkedlist\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4e2d\u989d\u5916\u5b58\u653e\u4e00\u4e2aziplist\uff0c\u5728\u8fd9\u4e9bziplist\u4e2d\u5b58\u653e\u7528\u6237\u6570\u636e"),(0,i.kt)("h2",{id:"\u5b9e\u9645\u5e94\u7528"},"\u5b9e\u9645\u5e94\u7528"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5229\u7528lpush brpop\u7684\u7ec4\u5408\u4f7f\u7528\u6765\u5b9e\u73b0\u6d88\u606f\u961f\u5217"),(0,i.kt)("li",{parentName:"ul"},"\u7528list\u5b58\u653e\u5217\u8868\u6570\u636e")))}p.isMDXComponent=!0}}]);